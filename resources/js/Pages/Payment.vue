<template>
    <div class="bg-gray-100 min-h-screen">
        <div class="w-full h-48" :style="{'background-image': 'url(/background-donate.jpg)'}">

        </div>
        <div class="container mx-auto">
            <div v-if="this.mode === 'form'" class="w-full mx-auto mt-8 px-64">
                <form class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-16">
                    <div class="mb-4 flex items-center">
                        <div class="rounded-full h-16 w-16 bg-cover"
                             :style="'background-image: url(' + this.user.profile_image + ')'">
                        </div>
                        <span class=" ml-4">{{ this.user.nickname }}</span>
                    </div>
                    <div class="mb-4">
                        <action-message on="true" v-for="(error, index) in this.errors" :key="index">
                            {{ error }}
                        </action-message>
                    </div>
                    <div class="mb-4">
                        <input
                            class="appearance-none border rounded-lg w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none"
                            id="nickname" type="text" placeholder="Nickname" v-model="form.nickname"/>
                    </div>
                    <div class="mb-6">
                        <input
                            class="appearance-none border rounded-lg w-full pt-4 pb-20 px-4 text-gray-700 leading-tight focus:outline-none"
                            id="message" placeholder="Message" v-model="form.message"/>
                    </div>
                    <div class="flex flex-wrap mb-6 justify-between">
                        <input
                            class="md:w-3/4 appearance-none block w-full text-gray-700 border rounded-lg py-3 px-4 leading-tight focus:outline-none focus:outline-none"
                            id="amount" type="number" placeholder="Amount" v-model="form.amount">
                        <select
                            class="md:w-1/5 block appearance-none w-full border text-gray-700 py-3 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:outline-none"
                            id="currency" v-model="form.currency">
                            <option value="rub">RUB</option>
                            <option disabled>USD</option>
                            <option disabled>EURO</option>
                        </select>
                    </div>
                    <button
                        class="bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                        type="button" @click="goToPayment">
                        Donate
                    </button>
                </form>
                <p class="text-center text-gray-500 text-xs">
                    &copy;2020 Powered by LiveDonate (github.com/YanGusik)
                </p>
            </div>
            <div v-if="goals !== undefined && this.mode === 'form'"/>
            <div v-if="this.mode === 'payment'" class="w-full mx-auto mt-8 px-64">
                <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-16">
                    <div class="mb-6">Select a payment method</div>
                    <!--                    Необходимо сделать отдельным компонентом, а пока что погавнакодю)))-->
                    <div class="flex flex-wrap -mx-2 mb-6">
                        <div class="w-1/3 px-4 mb-6">
                            <div class="shadow hover:shadow-md p-5 h-28"
                                 @click="setPayment('yandex_money')">
                                <svg class="mx-auto h-full w-full" xmlns="http://www.w3.org/2000/svg"
                                     xmlns:xlink="http://www.w3.org/1999/xlink" width="101"
                                     height="70" viewBox="0 0 101 70">
                                    <defs>
                                        <path id="a" d="M.008 37.593V.119h28.415v37.474z"></path>
                                    </defs>
                                    <g fill="none" fill-rule="evenodd">
                                        <g transform="translate(36.256)">
                                            <mask id="b" fill="#fff">
                                                <use xlink:href="#a"></use>
                                            </mask>
                                            <path fill="#FACA22"
                                                  d="M0 18.707c0-2.104.176-3.44 4.522-6.692C8.12 9.322 19.652.119 19.652.119v15.363h8.77v22.11H2.74A2.752 2.752 0 0 1 0 34.846V18.707"
                                                  mask="url(#c)"></path>
                                        </g>
                                        <path fill="#C9A521" class="_darker"
                                              d="M56.528 15.556v8.693L40.14 35l20.718-6.492V15.556h-4.331"></path>
                                        <path fill="#000" class="_darker"
                                              d="M48.637 15.577c.837-1.246 2.06-1.686 2.73-.982.672.704.538 2.285-.3 3.532-.836 1.246-2.058 1.686-2.73.982-.67-.704-.536-2.285.3-3.532"></path>
                                        <g>
                                            <path fill="#F00"
                                                  d="M6.07 52.088h-.905c-1.369 0-2.693.966-2.693 3.77 0 2.711 1.214 3.583 2.693 3.583h.905v-7.353zM4.657 60.95l-2.693 6.457H0l2.958-6.905C1.567 59.747.64 58.38.64 55.859c0-3.536 2.097-5.303 4.591-5.303h2.538v16.851h-1.7V60.95H4.658z"></path>
                                            <path fill="#000"
                                                  d="M42.754 61.795c0-3.694 1.416-6.054 4.154-6.054 1.044 0 1.647.28 2.158.607l-.255 1.73c-.488-.42-1.184-.818-1.926-.818-1.3 0-2.228 1.473-2.228 4.442 0 2.945.696 4.628 2.158 4.628.882 0 1.555-.35 1.972-.724l.418 1.355c-.626.538-1.369.888-2.436.888-2.507 0-4.015-2.033-4.015-6.054zm-5.29.023v5.868h-1.811V55.904h1.81v5.447l2.808-5.447h1.833l-2.9 5.54 3.318 6.242h-1.973l-3.086-5.868zm-8.517-1.098h2.993c0-2.01-.325-3.483-1.369-3.483-1.114 0-1.508 1.379-1.624 3.483zm1.995 7.13c-2.413 0-3.898-1.94-3.898-5.564 0-3.787 1.044-6.545 3.527-6.545 1.95 0 3.226 1.472 3.226 5.47v1.005h-4.874c0 2.665.743 4.067 2.182 4.067 1.02 0 1.833-.467 2.297-.794l.418 1.401c-.743.585-1.717.96-2.878.96zm-7.704-10.473H21.22v.21c0 2.478-.116 6.101-1.09 8.603h3.11v-8.813zM25.953 70H24.33v-2.314h-5.013V70h-1.624v-3.81h.72c1.067-2.502 1.183-6.148 1.183-9.28v-1.006h5.43V66.19h.928V70zm-9.305-14.096v11.782H14.86v-5.283h-2.692v5.283h-1.81V55.904h1.81v5.002h2.692v-5.002h1.787zM59.899 51.511h-3.53c-.068 4.22-.182 7.438-.364 9.84-.205 2.494-.57 4.149-1.184 4.919h5.078V51.511zm1.207 15.714h-6.969L53.977 70h-.887v-3.73h.478c.797-.677 1.184-2.542 1.412-4.92.227-2.47.296-6.155.364-10.794h5.693V66.27h1.117V70h-.889l-.16-2.775zM64.548 60.928h4.282c.187-2.983-.748-4.319-1.942-4.319-1.24 0-2.246 1.514-2.34 4.32zm2.574 5.567c1.567 0 2.386-1.202 2.386-1.202l.351.845s-.889 1.27-2.76 1.27c-2.503 0-3.65-2.16-3.65-5.834 0-3.673 1.45-5.833 3.44-5.833 2.035 0 3.344 2.026 2.97 6.012h-5.334c.047 3.072.889 4.742 2.597 4.742zM76.549 61.783h-4.187v5.624h-1.144V55.741h1.144v5.161h4.187v-5.161h1.143v11.666H76.55v-5.624M81.287 60.926v5.625h.643c1.52 0 2.547-.81 2.547-2.824 0-1.967-.9-2.801-2.44-2.801h-.75zm-1.005-5.185h1.005v4.329h.793c2.054 0 3.382 1.203 3.382 3.634 0 2.477-1.413 3.703-3.447 3.703h-1.733V55.741zM89.17 56.644v10.763H88.05V55.741h5.18v.903h-4.062M99.94 59.283c0-.602.047-1.112.095-1.598h-.071c-.165.51-.376.996-.635 1.505l-3.862 8.217h-.941V55.741h1.036v8.101c0 .625-.048 1.135-.095 1.644h.07c.165-.532.4-1.041.636-1.55l3.862-8.195H101v11.666h-1.06v-8.124"></path>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="w-1/3 px-4 mb-6">
                            <div class="shadow hover:shadow-md p-5 h-28" @click="setPayment('paypal')">
                                <svg class="mx-auto h-full w-full" xmlns="http://www.w3.org/2000/svg" width="99"
                                     height="25"
                                     viewBox="0 0 99 25">
                                    <g fill="none" fill-rule="nonzero">
                                        <path fill="#253B80"
                                              d="M36.894 5.443h-5.46a.761.761 0 0 0-.75.647l-2.208 14.142c-.044.28.17.53.45.53h2.607a.761.761 0 0 0 .75-.647l.595-3.814a.76.76 0 0 1 .75-.648h1.728c3.597 0 5.672-1.758 6.214-5.242.245-1.524.01-2.721-.696-3.56-.776-.921-2.152-1.408-3.98-1.408zm.63 5.165c-.298 1.98-1.795 1.98-3.243 1.98h-.824l.578-3.697a.456.456 0 0 1 .45-.388h.377c.986 0 1.916 0 2.397.568.287.339.375.842.265 1.537zM53.216 10.544H50.6a.457.457 0 0 0-.45.388l-.115.739-.183-.268c-.566-.83-1.828-1.107-3.088-1.107-2.89 0-5.357 2.21-5.838 5.311-.25 1.547.105 3.026.974 4.058.797.948 1.937 1.343 3.293 1.343 2.328 0 3.62-1.512 3.62-1.512l-.117.734c-.044.28.17.532.449.532H51.5c.374 0 .69-.274.75-.647l1.413-9.04a.456.456 0 0 0-.448-.53zm-3.645 5.14c-.252 1.51-1.438 2.522-2.95 2.522-.76 0-1.366-.246-1.756-.712-.386-.463-.533-1.121-.41-1.855.236-1.496 1.441-2.542 2.93-2.542.743 0 1.346.249 1.744.72.398.474.556 1.137.442 1.868zM67.141 10.544h-2.627a.76.76 0 0 0-.629.337l-3.624 5.392-1.536-5.182a.762.762 0 0 0-.728-.547h-2.582a.46.46 0 0 0-.432.608l2.894 8.58-2.72 3.88a.46.46 0 0 0 .37.725h2.625c.25 0 .482-.122.624-.329l8.739-12.742a.46.46 0 0 0-.374-.722z"></path>
                                        <path fill="#179BD7"
                                              d="M75.84 5.443h-5.46a.76.76 0 0 0-.75.647l-2.208 14.142c-.044.28.17.53.449.53h2.802c.26 0 .483-.191.524-.452l.627-4.01a.76.76 0 0 1 .749-.647H74.3c3.598 0 5.673-1.758 6.216-5.242.245-1.524.01-2.721-.697-3.56-.775-.921-2.151-1.408-3.979-1.408zm.63 5.165c-.297 1.98-1.794 1.98-3.243 1.98h-.823l.579-3.697a.455.455 0 0 1 .449-.388h.377c.986 0 1.916 0 2.397.568.287.339.374.842.264 1.537zM92.161 10.544h-2.613a.454.454 0 0 0-.449.388l-.116.739-.183-.268c-.566-.83-1.828-1.107-3.088-1.107-2.889 0-5.356 2.21-5.837 5.311-.249 1.547.105 3.026.974 4.058.798.948 1.937 1.343 3.293 1.343 2.328 0 3.62-1.512 3.62-1.512l-.117.734c-.044.28.17.532.45.532h2.354a.76.76 0 0 0 .75-.647l1.413-9.04a.459.459 0 0 0-.451-.53zm-3.645 5.14c-.25 1.51-1.438 2.522-2.95 2.522-.757 0-1.366-.246-1.755-.712-.387-.463-.532-1.121-.41-1.855.236-1.496 1.44-2.542 2.93-2.542.742 0 1.345.249 1.743.72.4.474.558 1.137.442 1.868zM95.244 5.83l-2.241 14.402c-.044.28.17.53.448.53h2.253a.76.76 0 0 0 .75-.647l2.21-14.142a.458.458 0 0 0-.449-.531h-2.523a.458.458 0 0 0-.448.389z"></path>
                                        <path fill="#253B80"
                                              d="M5.801 23.511l.418-2.679-.93-.022H.847L3.934 1.042c.01-.06.04-.115.086-.155a.25.25 0 0 1 .164-.061h7.49c2.485 0 4.201.522 5.097 1.554.42.484.687.99.817 1.546.135.584.138 1.281.005 2.132l-.01.062v.545l.42.24c.354.19.635.407.85.655.36.414.593.94.69 1.563.102.642.069 1.404-.097 2.268-.192.994-.502 1.859-.92 2.567a5.26 5.26 0 0 1-1.457 1.613c-.556.398-1.216.7-1.963.894-.723.19-1.548.287-2.452.287h-.583a1.757 1.757 0 0 0-1.733 1.494l-.044.241-.738 4.722-.034.173c-.008.055-.024.083-.046.101a.123.123 0 0 1-.077.028H5.801z"></path>
                                        <path fill="#179BD7"
                                              d="M18.401 6.183a13.35 13.35 0 0 1-.076.444c-.988 5.121-4.367 6.89-8.682 6.89H7.446a1.07 1.07 0 0 0-1.055.914l-1.125 7.206-.318 2.043a.566.566 0 0 0 .554.656H9.4a.94.94 0 0 0 .927-.798l.038-.2.734-4.703.047-.258a.94.94 0 0 1 .926-.8h.583c3.775 0 6.73-1.549 7.595-6.03.36-1.871.174-3.434-.781-4.533a3.731 3.731 0 0 0-1.067-.83z"></path>
                                        <path fill="#222D65" class="_darker"
                                              d="M17.368 5.767a7.726 7.726 0 0 0-.96-.215 12.083 12.083 0 0 0-1.937-.143H8.6a.944.944 0 0 0-.925.8l-1.249 7.989-.036.233a1.07 1.07 0 0 1 1.055-.913h2.197c4.315 0 7.694-1.77 8.682-6.891.03-.152.054-.3.076-.444a5.236 5.236 0 0 0-.812-.346 7.169 7.169 0 0 0-.22-.07z"></path>
                                        <path fill="#253B80"
                                              d="M7.676 6.209a.942.942 0 0 1 .925-.8h5.87c.695 0 1.344.047 1.937.143a7.726 7.726 0 0 1 1.182.285c.291.098.562.213.812.346.294-1.893-.002-3.181-1.016-4.348C16.27.55 14.254 0 11.674 0H4.185c-.527 0-.976.387-1.058.914L.008 20.885a.648.648 0 0 0 .635.752h4.623l1.161-7.44L7.676 6.21z"></path>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="w-1/3 px-4 mb-6">
                            <div class="shadow hover:shadow-md p-5 h-28" @click="setPayment('qiwi')">
                                <svg class="mx-auto h-full w-full" xmlns="http://www.w3.org/2000/svg" width="99"
                                     height="43"
                                     viewBox="0 0 99 43">
                                    <g fill="none" fill-rule="evenodd">
                                        <path fill="#0022A0"
                                              d="M59.4 33.774c-.146.116-.318.093-.44-.047l-1.173-1.488c-1.076-1.373-2.445-2.233-4.988-2.233-4.792 0-7.799-3.28-7.799-8.492C45 16.28 48.007 13 52.799 13s7.775 3.28 7.775 8.514c0 2.652-.978 5.35-2.616 6.282-.294.163-.294.232 0 .325 1.418.489 2.078 1.07 2.836 2l1.1 1.42c.122.14.098.302-.05.419L59.4 33.774zM52.8 26.655c2.372 0 3.79-1.954 3.79-5.14 0-3.258-1.418-5.142-3.79-5.142-2.323 0-3.813 1.884-3.813 5.141 0 3.187 1.49 5.141 3.813 5.141zM67.917 29.35c0 .176-.121.286-.314.286h-3.289c-.193 0-.314-.11-.314-.286V14.287c0-.176.121-.287.314-.287h3.289c.193 0 .314.11.314.287V29.35M89.306 24.895a65.225 65.225 0 0 0-1.073 4.477c-.023.176-.14.264-.327.264H83.64c-.186 0-.303-.088-.326-.264a56.723 56.723 0 0 0-.84-3.661l-.723-2.867c-.14-.573-.327-1.5-.467-2.272-.046-.309-.326-.309-.372 0-.14.772-.327 1.676-.467 2.272l-.723 2.867c-.303 1.213-.56 2.382-.84 3.66-.022.177-.14.265-.325.265h-4.268c-.187 0-.304-.088-.327-.264a65.35 65.35 0 0 0-1.072-4.477L70.02 14.309c-.07-.177.047-.309.257-.309h3.218c.187 0 .303.088.35.243l1.585 5.954c.397 1.5.723 3.419.863 4.852.024.287.374.31.42 0 .21-1.411.583-3.352 1.026-4.852l1.702-5.954a.321.321 0 0 1 .327-.243h2.658c.164 0 .28.088.327.243l1.726 5.954c.442 1.5.816 3.44 1.026 4.852.023.31.373.287.396 0 .117-1.433.466-3.352.863-4.852l1.586-5.954c.046-.155.162-.243.35-.243h3.218c.21 0 .326.132.256.309l-2.868 10.586M98.917 29.35c0 .176-.121.286-.314.286h-3.289c-.193 0-.314-.11-.314-.286V14.287c0-.176.121-.287.314-.287h3.289c.193 0 .314.11.314.287V29.35"></path>
                                        <path fill="#FF8C00"
                                              d="M28.956 30.206c-.386 0-.708.134-.906.377-.507.623-.28 1.72.498 2.395.339.295.827.471 1.307.471.488 0 .895-.182 1.147-.513.452-.603.192-1.458-.663-2.177-.423-.357-.914-.553-1.383-.553m4.259-3.13c-.378-.11-.66-.027-.8.226-.211.384-.055 1.143.37 1.805.432.67.798 1.01 1.09 1.01.1 0 .19-.042.26-.121.161-.186.215-.573.147-1.064-.069-.502-.378-1.533-1.067-1.855m8.436 15.201c.39.482-.204.97-.646.58-4.421-3.899-8.14-5.003-11.817-5.156-1.952-.082-3.892.105-5.92.283a138.597 138.597 0 0 1-1.77.145 20.36 20.36 0 0 1-2.175.118c-3.46 0-6.725-.845-9.705-2.51-2.991-1.671-5.369-4.005-7.066-6.937C.86 25.876 0 22.643 0 19.193c0-3.446.858-6.692 2.549-9.648a18.65 18.65 0 0 1 6.985-7.004A18.93 18.93 0 0 1 19.067 0c3.536 0 6.84.845 9.822 2.51a18.552 18.552 0 0 1 7.088 6.958c1.71 2.943 2.577 6.184 2.577 9.633 0 1.332-.13 2.632-.385 3.897-.032.183-.08.406-.146.665a18.8 18.8 0 0 1-.16.62l-.016-.01c-.342 1.092-.98 2.638-2.167 4.622-.128.209-.198.05-.215-.067-.415-2.918-1.7-5.135-3.964-6.566l-.113-.069a9.928 9.928 0 0 0-1.19-.62c-.54-.236-1.122-.44-1.748-.609-.384-.102-1.24-.058-.929-.365.128-.126 1.982-.155 4.113-.02l.125.007c.039-.445.06-.9.06-1.369 0-3.641-1.211-6.61-3.702-9.076-2.493-2.467-5.407-3.667-8.91-3.667-3.587 0-6.496 1.201-8.892 3.672-2.409 2.484-3.58 5.428-3.58 9 0 3.566 1.204 6.498 3.681 8.964 2.477 2.465 5.352 3.664 8.791 3.664.165 0 .328-.005.49-.01l-.01-.124c-.197-2.513-.239-4.602.28-3.76.183.298.366.58.547.85a18.148 18.148 0 0 0 2.119 2.632c2.444 2.47 4.85 3.078 7.409 3.703l.163.04c.419.103.842.207 1.27.32 3.04.809 6.333 2.111 10.176 6.853"></path>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="w-1/3 px-4 mb-6">
                            <div class="shadow hover:shadow-md p-5 h-28" @click="setPayment('bitcoin')">
                                <svg class="mx-auto h-full w-full"
                                     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                     xmlns="http://www.w3.org/2000/svg"
                                     xmlns:cc="http://creativecommons.org/ns#"
                                     xmlns:dc="http://purl.org/dc/elements/1.1/"
                                     viewBox="0 0 375 60" height="60" width="315" preserveAspectRatio="xMidYMid meet"
                                     xml:space="preserve">
                            <g transform="translate(-259.60744,-317.50471)">
                                <path
                                    d="m352.64,357.25c-4.274,17.143-21.637,27.576-38.782,23.301-17.138-4.274-27.571-21.638-23.295-38.78,4.272-17.145,21.635-27.579,38.775-23.305,17.144,4.274,27.576,21.64,23.302,38.784z"
                                    fill="#f7931a"></path>
                                <path class="_darker"
                                      d="m335.71,344.95c0.637-4.258-2.605-6.547-7.038-8.074l1.438-5.768-3.511-0.875-1.4,5.616c-0.923-0.23-1.871-0.447-2.813-0.662l1.41-5.653-3.509-0.875-1.439,5.766c-0.764-0.174-1.514-0.346-2.242-0.527l0.004-0.018-4.842-1.209-0.934,3.75s2.605,0.597,2.55,0.634c1.422,0.355,1.679,1.296,1.636,2.042l-1.638,6.571c0.098,0.025,0.225,0.061,0.365,0.117-0.117-0.029-0.242-0.061-0.371-0.092l-2.296,9.205c-0.174,0.432-0.615,1.08-1.609,0.834,0.035,0.051-2.552-0.637-2.552-0.637l-1.743,4.019,4.569,1.139c0.85,0.213,1.683,0.436,2.503,0.646l-1.453,5.834,3.507,0.875,1.439-5.772c0.958,0.26,1.888,0.5,2.798,0.726l-1.434,5.745,3.511,0.875,1.453-5.823c5.987,1.133,10.489,0.676,12.384-4.739,1.527-4.36-0.076-6.875-3.226-8.515,2.294-0.529,4.022-2.038,4.483-5.155zm-8.022,11.249c-1.085,4.36-8.426,2.003-10.806,1.412l1.928-7.729c2.38,0.594,10.012,1.77,8.878,6.317zm1.086-11.312c-0.99,3.966-7.1,1.951-9.082,1.457l1.748-7.01c1.982,0.494,8.365,1.416,7.334,5.553z"
                                      fill="#FFF"></path>
                                <path fill="#4d4d4d"
                                      d="m383.38,336.87c2.595,0,4.837,0.465,6.721,1.378,1.893,0.922,3.455,2.164,4.708,3.726,1.236,1.57,2.156,3.405,2.75,5.508,0.59,2.109,0.886,4.376,0.886,6.803,0,3.728-0.683,7.25-2.062,10.57-1.379,3.325-3.25,6.209-5.63,8.669-2.378,2.457-5.186,4.394-8.424,5.825-3.233,1.432-6.748,2.148-10.522,2.148-0.488,0-1.346-0.014-2.558-0.039s-2.605-0.15-4.165-0.361c-1.57-0.219-3.23-0.543-4.983-0.977-1.752-0.426-3.416-1.023-4.983-1.781l14.012-58.876,12.55-1.945-5.017,20.893c1.074-0.484,2.156-0.859,3.236-1.132,1.081-0.269,2.241-0.409,3.481-0.409zm-10.527,34.671c1.89,0,3.671-0.465,5.344-1.378,1.678-0.914,3.126-2.148,4.339-3.685,1.213-1.544,2.173-3.283,2.873-5.226s1.054-3.97,1.054-6.079c0-2.591-0.433-4.612-1.296-6.073-0.863-1.455-2.46-2.187-4.779-2.187-0.76,0-1.739,0.145-2.953,0.404-1.218,0.275-2.308,0.846-3.285,1.705l-5.342,22.188c0.322,0.057,0.607,0.111,0.85,0.162,0.238,0.055,0.501,0.094,0.763,0.121,0.277,0.031,0.594,0.047,0.977,0.047s0.862,0.001,1.455,0.001z"></path>
                                <path fill="#4d4d4d"
                                      d="m411.46,380.37h-11.987l10.123-42.597h12.069l-10.205,42.597zm5.833-47.787c-1.673,0-3.19-0.498-4.536-1.496-1.357-0.992-2.029-2.519-2.029-4.577,0-1.132,0.23-2.194,0.686-3.196,0.463-1,1.068-1.861,1.826-2.593,0.757-0.726,1.634-1.306,2.63-1.743,1.002-0.43,2.068-0.645,3.204-0.645,1.672,0,3.181,0.498,4.532,1.496,1.346,1.003,2.023,2.53,2.023,4.577,0,1.136-0.229,2.202-0.689,3.202-0.457,1-1.062,1.861-1.82,2.593-0.751,0.727-1.636,1.305-2.63,1.738-1.003,0.437-2.065,0.644-3.197,0.644z"></path>
                                <path fill="#4d4d4d"
                                      d="m432.17,327.16,12.555-1.945-3.083,12.556h13.446l-2.428,9.878h-13.365l-3.56,14.9c-0.328,1.242-0.514,2.402-0.566,3.48-0.059,1.083,0.078,2.013,0.402,2.796,0.322,0.785,0.901,1.39,1.741,1.818,0.836,0.435,2.033,0.654,3.603,0.654,1.293,0,2.553-0.123,3.771-0.367,1.211-0.24,2.438-0.574,3.68-1.011l0.894,9.236c-1.62,0.594-3.374,1.105-5.264,1.535-1.893,0.436-4.134,0.646-6.724,0.646-3.724,0-6.611-0.553-8.668-1.654-2.054-1.109-3.506-2.624-4.375-4.542-0.857-1.911-1.24-4.114-1.133-6.596,0.111-2.488,0.486-5.103,1.133-7.857l7.941-33.527z"></path>
                                <path fill="#4d4d4d"
                                      d="m454.56,363.36c0-3.669,0.594-7.129,1.781-10.368,1.185-3.242,2.892-6.077,5.107-8.51,2.207-2.421,4.896-4.339,8.061-5.747,3.15-1.4,6.677-2.106,10.564-2.106,2.433,0,4.606,0.23,6.518,0.691,1.92,0.465,3.657,1.066,5.228,1.82l-4.134,9.4c-1.08-0.438-2.201-0.824-3.36-1.174-1.16-0.357-2.576-0.529-4.251-0.529-4.001,0-7.164,1.379-9.518,4.128-2.345,2.751-3.526,6.454-3.526,11.099,0,2.753,0.594,4.979,1.786,6.682,1.186,1.703,3.377,2.55,6.558,2.55,1.57,0,3.085-0.164,4.536-0.484,1.462-0.324,2.753-0.732,3.89-1.214l0.895,9.636c-1.516,0.588-3.188,1.119-5.022,1.584-1.838,0.449-4.026,0.682-6.563,0.682-3.349,0-6.184-0.49-8.503-1.455-2.32-0.98-4.237-2.281-5.747-3.929-1.518-1.652-2.608-3.581-3.282-5.795-0.674-2.212-1.018-4.536-1.018-6.961z"></path>
                                <path fill="#4d4d4d"
                                      d="m507.81,381.5c-2.861,0-5.346-0.436-7.454-1.299-2.102-0.863-3.843-2.074-5.22-3.644-1.379-1.562-2.411-3.413-3.118-5.546-0.707-2.132-1.047-4.493-1.047-7.08,0-3.245,0.521-6.489,1.574-9.724,1.048-3.242,2.603-6.155,4.661-8.744,2.042-2.593,4.561-4.713,7.527-6.366,2.963-1.642,6.371-2.468,10.199-2.468,2.809,0,5.281,0.437,7.418,1.3,2.127,0.861,3.879,2.082,5.264,3.644,1.37,1.57,2.411,3.413,3.111,5.549,0.705,2.128,1.053,4.495,1.053,7.084,0,3.235-0.514,6.479-1.534,9.724-1.021,3.229-2.536,6.149-4.536,8.744-1.996,2.589-4.492,4.708-7.49,6.354-2.994,1.646-6.466,2.472-10.408,2.472zm5.991-34.662c-1.777,0-3.348,0.516-4.693,1.535-1.35,1.031-2.484,2.327-3.398,3.89-0.924,1.57-1.609,3.282-2.072,5.143-0.459,1.865-0.684,3.628-0.684,5.303,0,2.703,0.436,4.808,1.293,6.323,0.869,1.507,2.43,2.265,4.699,2.265,1.783,0,3.346-0.512,4.699-1.542,1.342-1.023,2.477-2.32,3.398-3.886,0.918-1.562,1.609-3.279,2.072-5.143,0.453-1.859,0.684-3.632,0.684-5.304,0-2.696-0.434-4.806-1.299-6.319-0.864-1.507-2.432-2.265-4.699-2.265z"></path>
                                <path fill="#4d4d4d"
                                      d="m544.84,380.37h-11.997l10.123-42.597h12.075l-10.201,42.597zm5.824-47.787c-1.672,0-3.188-0.498-4.532-1.496-1.35-0.992-2.028-2.519-2.028-4.577,0-1.132,0.233-2.194,0.69-3.196,0.457-1,1.066-1.861,1.824-2.593,0.753-0.726,1.638-1.306,2.632-1.743,0.996-0.43,2.062-0.645,3.194-0.645,1.676,0,3.19,0.498,4.538,1.496,1.349,1.003,2.03,2.53,2.03,4.577,0,1.136-0.242,2.202-0.695,3.202s-1.062,1.861-1.817,2.593c-0.76,0.727-1.634,1.305-2.63,1.738-1.004,0.437-2.068,0.644-3.206,0.644z"></path>
                                <path fill="#4d4d4d"
                                      d="m563.68,339.71c0.91-0.266,1.926-0.586,3.031-0.934,1.109-0.348,2.348-0.672,3.732-0.964,1.369-0.301,2.914-0.545,4.613-0.734,1.699-0.193,3.635-0.287,5.786-0.287,6.322,0,10.68,1.841,13.086,5.512,2.404,3.671,2.82,8.695,1.26,15.063l-5.514,23h-12.066l5.344-22.516c0.326-1.406,0.582-2.765,0.771-4.093,0.191-1.316,0.18-2.476-0.043-3.48-0.213-0.992-0.715-1.804-1.494-2.433-0.791-0.619-1.986-0.93-3.607-0.93-1.563,0-3.153,0.168-4.776,0.492l-7.857,32.959h-12.071l9.805-40.655z"></path>
                            </g>
                        </svg>
                            </div>
                        </div>
                    </div>
                    <div class="mb-6">
                        <input
                            class="appearance-none border rounded-lg w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none mb-6"
                            id="email" type="email" placeholder="Email" v-model="form.email"/>
                        <button
                            class="bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                            type="button" @click="donate">
                            Proceed to checkout
                        </button>
                    </div>
                </div>
            </div>
            <div v-if="this.mode === 'finish'" class="w-full mx-auto mt-8 px-64">
                <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-16">
                    Success operation or fail =)
                    {{this.redirect_data}}
                    {{this.status}}
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import AppLayout from './../Layouts/AppLayout'
import ActionMessage from './../Jetstream/ActionMessage'

const axios = require('axios')

export default {
    components: {
        AppLayout,
        ActionMessage
    },
    props: ['redirect_data', 'user', 'goals'],
    data() {
        return {
            mode: "form",
            form: {
                user_id: this.user.id,
                nickname: '',
                message: '',
                email: '',
                amount: 0,
                currency: 'rub',
                type_payment: ''
            },
            errors: [],
            status: ''
        }
    },
    methods: {
        goToPayment() {
            this.mode = "payment";
        },
        donate() {
            axios.post('/payments/pay', this.form)
                .then((data) => {
                    console.log(data);
                    this.status = data.data.status;
                    if (this.status === "redirect") {
                        window.location.href = data.data.url;
                        return;
                    }
                    this.mode = "finish";
                })
                .catch((error) => {
                    this.mode = "form";
                    let errors = error.response.data.errors;
                    Object.keys(errors).forEach(function (key) {
                        this.errors = [];
                        this.errors.push(errors[key]);
                    });
                });
        },
        setPayment(payment) {
            this.form.type_payment = payment;
            console.log(payment);
        }
    },
    mounted() {
        if (this.redirect_data) {
            this.mode = "finish";
        }

        console.log(this.redirect_data);
        console.log(this.nickname);
        console.log(this.goals);
    }
}
</script>
